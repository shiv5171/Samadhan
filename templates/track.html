<!-- track.html -->
{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">
  {{ t("Track Complaint", "‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡•á‡§Ç") }} ‚Äî #{{ c.tracking_code }}
</h1>

<div class="bg-white text-black p-4 rounded space-y-2">
  <div class="flex justify-between">
    <div>
      <h3 class="font-semibold">{{ c.title }}</h3>
      <p class="text-sm text-gray-600">{{ c.category }} ‚Ä¢ {{ c.department or 'N/A' }} ‚Ä¢ {{ c.location or "N/A" }}</p>
    </div>
    <div class="text-right">
      <span class="badge {% if c.status=='Pending' %}badge-yellow{% elif c.status=='In Progress' %}badge-blue{% else %}badge-green{% endif %}">{{ c.status }}</span>
      {% set sla = sla_state(c.resolve_by, c.status) %}
      {% if c.resolve_by %}
        <div class="text-xs {% if sla=='overdue' %}text-red-700{% elif sla=='soon' %}text-amber-700{% else %}text-gray-600{% endif %}">
          {{ t("Resolve by", "‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§§‡§ø‡§•‡§ø") }}: {{ c.resolve_by.strftime('%d %b %Y') }}
        </div>
      {% endif %}
    </div>
  </div>

  <p>{{ c.description }}</p>

  <p class="text-xs text-gray-500">
    {{ c.name }} ({{ c.role }}) ‚Ä¢ {{ c.email }} ‚Ä¢ {{ c.created_at.strftime('%d %b %Y %I:%M %p') }}
    {% if c.lat and c.lng %} ‚Ä¢ üìç {{ c.lat }}, {{ c.lng }}{% endif %}
  </p>

  {% if c.image_path %}
    <img class="rounded max-h-72 mt-2" src="{{ url_for('uploaded_file', filename=c.image_path) }}" />
  {% endif %}
</div>

<div class="mt-4">
  <a href="{{ url_for('list_complaints') }}" class="button-glass">{{ t("Back to history", "‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç") }}</a>
</div>
{% endblock %}
